<html lang="ru">
  <head>
    <title>Налоговый калькулятор</title>
  <style>
  body {
    background: #f3f6fb;
    font-family: "Segoe UI", sans-serif;
    margin: 0;
    padding: 0;
  }

  .tabs-wrap {
    max-width: 1200px;
    margin: 30px auto;
    padding: 20px;
  }

  .tabs-container {
    position: relative;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
    overflow: hidden;
  }

  .tabs-track {
    display: flex;
    gap: 14px;
    transition: transform 0.35s ease;
    will-change: transform;
    padding: 16px;
  }

  .tab {
    min-width: 260px;
    flex: 0 0 auto;
    background: linear-gradient(180deg, #f8fbff, #fff);
    padding: 16px;
    border-radius: 10px;
    box-shadow: 0 3px 10px rgba(17, 24, 39, 0.08);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
  }

  .tab:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 18px rgba(17, 24, 39, 0.12);
  }

  .tab h4 {
    margin: 0 0 8px;
    font-size: 17px;
  }

  .tab p {
    margin: 0;
    color: #6b7280;
    font-size: 14px;
    flex: 1;
  }

  .tab a {
    display: inline-block;
    margin-top: 12px;
    padding: 10px 14px;
    background: #050506;
    color: #fff;
    text-decoration: none;
    border-radius: 8px;
    font-size: 14px;
    text-align: center;
    transition: background 0.25s ease;
  }

  .tab a:hover {
    background: #050506;
  }

  .tabs-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: #050506;
    color: #fff;
    width: 50px;
    height: 50px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 8px 22px rgba(23, 102, 255, 0.18);
    font-size: 22px;
    transition: background 0.25s ease, transform 0.25s ease;
  }

  .tabs-btn:hover {
    background: #050506;
    transform: translateY(-50%) scale(1.05);
  }

  .tabs-btn.left {
    left: 10px;
  }

  .tabs-btn.right {
    right: 10px;
  }

  .tabs-btn:disabled {
    opacity: 0.45;
    cursor: default;
    transform: translateY(-50%);
  }

  @media (max-width: 768px) {
    .tab {
      min-width: 200px;
    }

    .tabs-btn {
      width: 40px;
      height: 40px;
      font-size: 18px;
    }
  }
</style>

<div class="tabs-wrap">
  <div class="tabs-container" id="tabsContainer">
    <button class="tabs-btn left" id="btnLeft">&larr;</button>
    <div class="tabs-track" id="tabsTrack">
      <div class="tab">
        <h4>Доходы и рассходы</h4>
        <a href="https://umarfaruh.github.io/budget.rk/">Перейти</a>
      </div>
      <div class="tab">
        <h4>Налоговый калькулятор</h4>
        <a href="https://umarfaruh.github.io/financial_management/">Перейти</a>
      </div>
      <div class="tab">
        <h4>Накопитель</h4>
        <a href="https://umarfaruh.github.io/Expenses-calculate-your-expenses-correctly/">Перейти</a>
      </div>
      <div class="tab">
        <h4>Калькулятор ипотеки</h4>
        <a href="https://umarfaruh.github.io/mortgage/">Перейти</a>
      </div>
      <div class="tab">
        <h4>Калькулятор депозита</h4>
        <a href="https://umarfaruh.github.io/Deposit-calculator/">Перейти</a>
      </div>
      <div class="tab">
        <h4>Калькулятор депозита 2</h4>
        <a href="https://umarfaruh.github.io/Deposit-interest-calculator/">Перейти</a>
      </div>
    </div>
    <button class="tabs-btn right" id="btnRight">&rarr;</button>
  </div>
</div>
 <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Налоговый калькулятор</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
      function TaxCalculator() {
        const [income, setIncome] = React.useState(500000);
        const [incomePeriod, setIncomePeriod] = React.useState("annual");
        const [deductions, setDeductions] = React.useState(0);
        const [useProgressive, setUseProgressive] = React.useState(false);
        const [flatRate, setFlatRate] = React.useState(13);
        const [brackets, setBrackets] = React.useState([
          { upTo: 100000, rate: 10 },
          { upTo: 300000, rate: 20 },
          { upTo: null, rate: 30 },
        ]);
        const [history, setHistory] = React.useState([]);

        React.useEffect(() => {
          const saved = localStorage.getItem('tax_calc_html');
          if (saved) {
            const p = JSON.parse(saved);
            setIncome(p.income || 0);
            setIncomePeriod(p.incomePeriod || 'annual');
            setDeductions(p.deductions || 0);
            setUseProgressive(p.useProgressive || false);
            setFlatRate(p.flatRate || 13);
            setBrackets(p.brackets || []);
            setHistory(p.history || []);
          }
        }, []);

        React.useEffect(() => {
          localStorage.setItem('tax_calc_html', JSON.stringify({ income, incomePeriod, deductions, useProgressive, flatRate, brackets, history }));
        }, [income, incomePeriod, deductions, useProgressive, flatRate, brackets, history]);

        const toAnnual = (v, p) => (p === 'monthly' ? v * 12 : v);
        const format = (v) => v.toLocaleString('ru-RU', { maximumFractionDigits: 2 });

        function calc() {
          const annualIncome = toAnnual(+income, incomePeriod);
          const taxable = Math.max(0, annualIncome - +deductions);
          let tax = 0;
          if (!useProgressive) {
            tax = taxable * flatRate / 100;
          } else {
            let remain = taxable, lower = 0;
            for (const b of brackets) {
              const upTo = b.upTo == null ? Infinity : b.upTo;
              const part = Math.min(remain, upTo - lower);
              if (part > 0) tax += part * b.rate / 100;
              remain -= part;
              lower = upTo;
              if (remain <= 0) break;
            }
          }
          const net = annualIncome - tax;
          return { annualIncome, taxable, tax, net, netMonthly: net/12 };
        }

        const res = calc();

        return (
          <div className="max-w-3xl mx-auto p-6">
             <br></br>
            <h1 className="text-2xl font-bold mb-4">Налоговый калькулятор</h1>

            <div className="space-y-3 bg-white p-4 rounded shadow">
              <div>
                <label>Доход:</label>
                <div className="flex gap-2 mt-1">
                  <input type="number" value={income} onChange={e=>setIncome(+e.target.value)} className="border p-2 rounded flex-1"/>
                  <select value={incomePeriod} onChange={e=>setIncomePeriod(e.target.value)} className="border p-2 rounded">
                    <option value="annual">Годовой</option>
                    <option value="monthly">Месячный</option>
                  </select>
                </div>
              </div>

              <div>
                <label>Вычеты:</label>
                <input type="number" value={deductions} onChange={e=>setDeductions(+e.target.value)} className="border p-2 rounded w-full mt-1"/>
              </div>

              <div className="flex items-center gap-2">
                <input type="checkbox" checked={useProgressive} onChange={e=>setUseProgressive(e.target.checked)}/>
                <label>Прогрессивная шкала</label>
              </div>

              {!useProgressive && (
                <div>
                  <label>Плоская ставка (%)</label>
                  <input type="number" value={flatRate} onChange={e=>setFlatRate(+e.target.value)} className="border p-2 rounded w-full mt-1"/>
                </div>
              )}

              {useProgressive && (
                <div className="space-y-2">
                  {brackets.map((b, i)=>(
                    <div key={i} className="flex gap-2">
                      <input type="number" placeholder="до" value={b.upTo ?? ''} onChange={e=>{
                        const v=e.target.value===''?null:+e.target.value;
                        setBrackets(brackets.map((x,j)=>j===i?{...x,upTo:v}:x));
                      }} className="border p-2 rounded flex-1"/>
                      <input type="number" placeholder="%" value={b.rate} onChange={e=>setBrackets(brackets.map((x,j)=>j===i?{...x,rate:+e.target.value}:x))} className="border p-2 rounded w-24"/>
                    </div>
                  ))}
                  <button onClick={()=>setBrackets([...brackets,{upTo:null,rate:0}])} className="bg-blue-500 text-white px-3 py-1 rounded">Добавить</button>
                </div>
              )}

              <div className="p-4 bg-gray-50 rounded mt-4">
                <div>Годовой доход: <b>{format(res.annualIncome)}</b></div>
                <div>Облагаемый: <b>{format(res.taxable)}</b></div>
                <div>Налог: <b className="text-red-600">{format(res.tax)}</b></div>
                <div>Чистый годовой: <b>{format(res.net)}</b></div>
                <div>Чистый в месяц: <b>{format(res.netMonthly)}</b></div>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<TaxCalculator/>);
    </script>
  </body>
</html>

